<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Shopping</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!--RELEASE


		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

		<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
-->

		<!--DEVELOPMENT-->
		<link rel="stylesheet" href="libs/bootstrap-4.3.1.min.css">
		<script src="libs/bootstrap-4.3.1.min.js"></script>
		<script src="libs/jquery-3.4.1.min.js"></script>
		<script src="libs/popper-1.14.7.min.js"></script>

		<script type="text/javascript">
			
			$(document).ready(function() {
				$(window).scroll(function() {
					if (($(window).scrollTop() + $(window).height()) > $("table").height()) {
						$.getJSON("http://localhost:4567/api/getMoreProducts", function(result) {


							var tableElement = document.getElementById("productsTable");

							var htmlAsString = "";


							//Should an array of 9 items. Dividing them onto 3 rows.
							// Row 1
							htmlAsString += '<tr>';
							for (var i = 0; i < 3; i++) {
								htmlAsString += "" +
								"<td>" +

								'<div class="card" ><img style="width:50%" class="card-img-top" src="pics/' + result[i].ImagePath + '" alt="Card image">' +
								'<div class="card-body">' +
								'<h4 class="card-title">' + result[i].name + '</h4>' +
								'<p class="card-text">Some example text.</p>' +
								'<a href="#" class="btn btn-primary">See Profile</a>' +
								'</div></div>' +

								"</td>";
							}
							htmlAsString += '</tr>';


							// Row 2
							htmlAsString += '<tr>';
							for (var i = 3; i < 6; i++) {
								htmlAsString += "" +
								"<td>" +

								'<div class="card"><img style="width:50%" class="card-img-top" src="pics/' + result[i].ImagePath + '" alt="Card image">' +
								'<div class="card-body">' +
								'<h4 class="card-title">' + result[i].name + '</h4>' +
								'<p class="card-text">Some example text.</p>' +
								'<a href="#" class="btn btn-primary">See Profile</a>' +
								'</div></div>' +

								"</td>";
							}
							htmlAsString += '</tr>';


							// Row 3
							htmlAsString += '<tr>';
							for (var i = 6; i < 9; i++) {
								htmlAsString += "" +
								"<td>" +

								'<div class="card"><img style="width:50%" class="card-img-top" src="pics/' + result[i].ImagePath + '" alt="Card image">' +
								'<div class="card-body">' +
								'<h4 class="card-title">' + result[i].name + '</h4>' +
								'<p class="card-text">Some example text.</p>' +
								'<a href="#" class="btn btn-primary">See Profile</a>' +
								'</div></div>' +

								"</td>";
							}
							htmlAsString += '</tr>';

							console.log(htmlAsString);

							//tableElement.appendChild(new DOMParser().parseFromString(htmlAsString, "text/html"));

							tableElement.innerHTML += htmlAsString;

							document.reload();

							console.log(tableElement);




							/*result.forEach(function(arrayItem) {
								console.log(arrayItem);
								
								document.getElementById("productsTable").innerHTML += "<tr>" +
								"<td>" +

								'<div class="card" style="width:400px"><img class="card-img-top" src="pics/' + arrayItem.ImagePath + '" alt="Card image">' +
								'<div class="card-body">' +
								'<h4 class="card-title">' + arrayItem.name + '</h4>' +
								'<p class="card-text">Some example text.</p>' +
								'<a href="#" class="btn btn-primary">See Profile</a>' +
								'</div></div>' +

								"</td>" +
								"</tr>";


							});*/
						});
					}
				});
			});

		</script>


	</head>

	<body>
		<div class="container-md">
			<table id="productsTable">
				<tr>
					<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>

<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>

<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>
</tr>

<tr>
					<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>

<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>

<td>
			<div class="card">
  <img style="width:50%" class="card-img-top" src="pics/Akee.jpg" alt="Card image">
  <div class="card-body">
	<h4 class="card-title">John Doe</h4>
	<p class="card-text">Some example text.</p>
	<a href="#" class="btn btn-primary">See Profile</a>
  </div>
</div>
</td>
</tr>
</table>

		</div>
	</body>

</html>